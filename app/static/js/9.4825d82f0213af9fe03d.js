webpackJsonp([9],{GkRM:function(t,e){},HrWV:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),o=i.n(n),r=i("Xxa5"),s=i.n(r),a=i("exGp"),l=i.n(a),c={data:[{children:[],id:"root",is_function:"N",label:"root",pid:"root",routing:""}],errmsg:"成功",errno:"0"},u={name:"Jurisdiction",data:function(){return{jurisdictionData:[],searchVal:"",formLabelWidth:"120px",addFormVisible:!1,form:{discripe:"",label:"",pid:"",is_function:"",routing:""},fixFormVisible:!1,form1:{discripe:"",label:"",pid:"",is_function:"",routing:"",id:""},functionList:[{label:"菜单",val:"N"},{label:"功能",val:"Y"}],curJurisdiction:{}}},watch:{},created:function(){this.getJurisdictionFn()},methods:{append:function(t){this.addFormVisible=!0,console.log(t),this.form.pid=t.pid,this.curJurisdiction=t},fixed:function(t,e){this.fixFormVisible=!0,console.log(1,e),this.form1.pid=e.pid,this.curJurisdiction=e,this.form1.label=e.label,this.form1.discripe=e.discripe,this.form1.is_function=e.is_function,e.routing?this.form1.routing=e.routing:this.form1.routing="",this.form1.id=e.id},remove:function(t,e){var i=this,n={id_list:[e.id]};this.$confirm("此操作将删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.clearFn(n)}).catch(function(){i.notifyFn("提示","已取消删除")})},isDisabled:function(t,e){return console.log(t,e),"root"===t.label},renderContent:function(t,e){var i=this,n=e.node,o=e.data;e.store;return"root"==n.label?t("span",{class:"custom-tree-node"},[t("span",[n.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(){return i.append(o)}},class:"rootClass"},["追加"])])]):t("span",{class:"custom-tree-node"},[t("span",[n.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(){return i.append(o)}}},["追加"]),t("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(){return i.fixed(n,o)}}},["修改"]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(){return i.remove(n,o)}}},["删除"])])])},addSureFn:function(){"root"===this.form.pid?this.form.pid=null:this.form.pid=this.curJurisdiction.id,console.log(this.form);var t={discripe:this.form.discripe.replace(/(^\s*)|(\s*$)/g,""),label:this.form.label.replace(/(^\s*)|(\s*$)/g,""),pid:this.form.pid,is_function:this.form.is_function,routing:this.form.routing};console.log(t),""!==t.discripe&&""!==t.label&&""!==t.is_function?"N"===t.is_function?this.addFn(t):t.routing.replace(/(^\s*)|(\s*$)/g,"")?this.addFn(t):this.notifyFn("提示","路由不能为空"):this.notifyFn("提示","请补全信息")},fixSureFn:function(){var t={discripe:this.form1.discripe.replace(/(^\s*)|(\s*$)/g,""),label:this.form1.label.replace(/(^\s*)|(\s*$)/g,""),pid:this.form1.pid,is_function:this.form1.is_function,routing:this.form1.routing,id:this.form1.id};console.log(t),""!==t.discripe&&""!==t.label&&""!==t.is_function?"N"===t.is_function?this.fixFn(t):t.routing.replace(/(^\s*)|(\s*$)/g,"")?this.fixFn(t):this.notifyFn("提示","路由不能为空"):this.notifyFn("提示","请补全信息")},addFn:function(t){var e=this;return l()(s.a.mark(function i(){var n;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$api.unsplash.postAddJurisdiction(t);case 3:n=i.sent,console.log(n),"0"===n.errno?(e.addFormVisible=!1,e.notifyFn("提示","增加权限成功","success"),e.getJurisdictionFn()):e.notifyFn("提示",n.errmsg),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),e.notifyFn("提示","服务器错误"),console.log(i.t0);case 12:case"end":return i.stop()}},i,e,[[0,8]])}))()},fixFn:function(t){var e=this;return l()(s.a.mark(function i(){var n;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$api.unsplash.postfixJurisdiction(t);case 3:n=i.sent,console.log(n),"0"===n.errno?(e.fixFormVisible=!1,e.notifyFn("提示","修改权限成功","success"),e.getJurisdictionFn()):e.notifyFn("提示",n.errmsg),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),e.notifyFn("提示","服务器错误"),console.log(i.t0);case 12:case"end":return i.stop()}},i,e,[[0,8]])}))()},getJurisdictionFn:function(){var t=this;return l()(s.a.mark(function e(){var i,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.prev=1,e.next=4,t.$api.unsplash.getJurisdictions(i);case 4:"0"===(n=e.sent).errno?(c.data[0].children=n.data.slice(),t.jurisdictionData=c.data,sessionStorage.tree=o()(t.jurisdictionData)):t.notifyFn("提示",n.errmsg),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t.notifyFn("提示","服务器错误"),console.log(e.t0);case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()},clearFn:function(t){var e=this;return l()(s.a.mark(function i(){var n;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$api.unsplash.postClearJurisdiction(t);case 3:n=i.sent,console.log(n),"0"===n.errno?(e.notifyFn("提示","删除权限成功","success"),e.getJurisdictionFn()):e.notifyFn("提示",n.errmsg),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),e.notifyFn("提示","服务器错误"),console.log(i.t0);case 12:case"end":return i.stop()}},i,e,[[0,8]])}))()},notifyFn:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warning";this.$notify({title:t,message:e,type:i,dangerouslyUseHTMLString:!0,duration:5e3,position:"top-right"})}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"jurisdiction"},[i("el-row",{staticClass:"functionalArea",attrs:{gutter:20}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:6,offset:18}},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[i("template",{slot:"append"},[i("el-button",{attrs:{type:"success",plain:""}},[t._v("搜索")])],1)],2)],1)],1),t._v(" "),i("div",{staticClass:"jurisdictionTitle"},[t._v("权限树")]),t._v(" "),i("div",{staticClass:"treeWarp"},[i("el-tree",{attrs:{data:t.jurisdictionData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent}})],1),t._v(" "),i("el-dialog",{attrs:{title:"添加权限",visible:t.addFormVisible,width:"800px"},on:{"update:visible":function(e){t.addFormVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"权限","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标识符","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.discripe,callback:function(e){t.$set(t.form,"discripe",e)},expression:"form.discripe"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"作用","label-width":t.formLabelWidth}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择权限作用"},model:{value:t.form.is_function,callback:function(e){t.$set(t.form,"is_function",e)},expression:"form.is_function"}},t._l(t.functionList,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.val}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"路由","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"输入路由",autocomplete:"off"},model:{value:t.form.routing,callback:function(e){t.$set(t.form,"routing",e)},expression:"form.routing"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addSureFn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"修改权限",visible:t.fixFormVisible,width:"800px"},on:{"update:visible":function(e){t.fixFormVisible=e}}},[i("el-form",{attrs:{model:t.form1}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"权限","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form1.label,callback:function(e){t.$set(t.form1,"label",e)},expression:"form1.label"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标识符","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form1.discripe,callback:function(e){t.$set(t.form1,"discripe",e)},expression:"form1.discripe"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"作用","label-width":t.formLabelWidth}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择权限作用"},model:{value:t.form1.is_function,callback:function(e){t.$set(t.form1,"is_function",e)},expression:"form1.is_function"}},t._l(t.functionList,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.val}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"路由","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"输入路由",autocomplete:"off"},model:{value:t.form1.routing,callback:function(e){t.$set(t.form1,"routing",e)},expression:"form1.routing"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.fixFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.fixSureFn}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(u,f,!1,function(t){i("GkRM")},null,null);e.default=d.exports}});
//# sourceMappingURL=9.4825d82f0213af9fe03d.js.map