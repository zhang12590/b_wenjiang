webpackJsonp([20],{"5tgg":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),l=a("exGp"),n=a.n(l),i={name:"ATheme",data:function(){return{selectThemeId:"",selectThemeName:"",themeList:[],selectMatterId:"",selectMatterName:"",matterList:[],searchTheme:"",tableData:[],levelList:[{label:"省,市（州）, 县（市、区）",val:"省,市（州）, 县（市、区）"},{label:"市（州）, 县（市、区）",val:"市（州）, 县（市、区）"},{label:"县（市、区）",val:"县（市、区）"}],processList:[{id:"",item:"",name:"",order:""}],styleList:[{label:"行政许可",val:"行政许可"}],needList:[{label:"是",val:"Y"},{label:"否",val:"N"}],addFormVisible:!1,formLabelWidth:"120px",form:{item:"",name:"",process:"",need:"",require:"",permit:""},fixFormVisible:!1,form1:{item:"",name:"",process:"",need:"",require:"",permit:"",id:""},selectIds:[]}},watch:{},created:function(){this.getThemeFn()},methods:{changeThemeFn:function(){for(var e=0;e<this.themeList.length;e++)if(this.themeList[e].val===this.selectThemeId){this.selectThemeName=this.themeList[e].label,this.getMatterFn(this.selectThemeName);break}},changeMatterFn:function(){for(var e=0;e<this.matterList.length;e++)if(this.matterList[e].val===this.selectMatterId){this.selectMatterName=this.matterList[e].label,this.getElementFn(this.selectMatterName),this.getItemStepsFn(this.selectMatterName);break}},addBtnFn:function(){this.selectMatterName?(this.addFormVisible=!0,this.form.item=this.selectMatterName,this.form.process=this.processList[0].id,this.form.need=this.needList[0].val):this.$message({type:"warning",message:"未选择主题!"})},addSureFn:function(){var e={step_id:this.form.process,name:this.form.name.replace(/(^\s*)|(\s*$)/g,""),requ:this.form.require,need:this.form.need,permit:this.form.permit,user_id:sessionStorage.user_id};""!==e.name&&""!==e.require&&""!==e.permit?this.addFn(e):this.$message({type:"warning",message:"请补全信息!"})},handleEdit:function(e,t){this.fixFormVisible=!0,this.form1.item=this.selectMatterName,this.form1.name=t.name,this.form1.need=t.need,this.form1.require=t.require,this.form1.permit=t.permit,this.form1.id=t.id;for(var a=0;a<this.processList.length;a++){if(t.step===this.processList[a].name){this.form1.process=this.processList[a].id;break}this.form1.process=this.processList[0].id}},fixSureFn:function(){var e={id:this.form1.id,step_id:this.form1.process,name:this.form1.name.replace(/(^\s*)|(\s*$)/g,""),requ:this.form1.require,need:this.form1.need,permit:this.form1.permit,user_id:sessionStorage.user_id};""!==e.name&&""!==e.require&&""!==e.permit?this.fixFn(e):this.$message({type:"warning",message:"请补全信息!"})},clearBtnFn:function(){var e=this;this.selectIds.length?this.$confirm("确定删除所选要素","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id_list:e.selectIds,user_id:sessionStorage.user_id};e.deleteSingleFn(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({type:"warning",message:"未选择要素!"})},handleDelete:function(e,t){var a=this;this.$confirm("确定删除要素："+t.name,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id_list:[t.id],user_id:sessionStorage.user_id};a.deleteSingleFn(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},getThemeFn:function(){var e=this;return n()(s.a.mark(function t(){var a,r,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={},t.next=4,e.$api.unsplash.getSubjects(a);case 4:if(r=t.sent,e.themeList=[],"0"===r.errno){for(l=0;l<r.data.subjects.length;l++)e.themeList.push({label:r.data.subjects[l].name,val:r.data.subjects[l].id});e.selectThemeId=e.themeList[0].val,e.selectThemeName=e.themeList[0].label,e.getMatterFn(e.selectThemeName)}else e.$alert("服务器错误","警告",{confirmButtonText:"确定",callback:function(e){}});t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0);case 13:case"end":return t.stop()}},t,e,[[0,10]])}))()},getMatterFn:function(e){var t=this;return n()(s.a.mark(function a(){var r,l,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={subject:e},a.next=4,t.$api.unsplash.getMatters(r);case 4:if("0"===(l=a.sent).errno){for(t.matterList=[],n=0;n<l.data.items.length;n++)t.matterList.push({label:l.data.items[n].name,val:l.data.items[n].id});t.selectMatterId=t.matterList[0].val,t.selectMatterName=t.matterList[0].label,t.getItemStepsFn(t.selectMatterName),t.getElementFn(t.selectMatterName)}else t.$alert("服务器错误","警告",{confirmButtonText:"确定",callback:function(e){}});a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0);case 12:case"end":return a.stop()}},a,t,[[0,9]])}))()},getElementFn:function(e){var t=this;return n()(s.a.mark(function a(){var r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={item:e},a.next=4,t.$api.unsplash.postElements(r);case 4:"0"===(l=a.sent).errno?(t.tableData=l.data,t.tableData=t.addSequence(t.tableData)):t.$alert("服务器错误","警告",{confirmButtonText:"确定",callback:function(e){}}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0);case 12:case"end":return a.stop()}},a,t,[[0,9]])}))()},getItemStepsFn:function(e){var t=this;return n()(s.a.mark(function a(){var r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={item:e},a.next=4,t.$api.unsplash.getItemSteps(r);case 4:"0"===(l=a.sent).errno?t.processList=l.data:t.$alert("服务器错误","警告",{confirmButtonText:"确定",callback:function(e){}}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,t,[[0,8]])}))()},addFn:function(e){var t=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$api.unsplash.postAddElement(e);case 3:"0"===a.sent.errno?(t.addFormVisible=!1,t.$message({type:"success",message:"增加要素成功"}),t.getElementFn(t.selectMatterName)):t.$message({type:"warning",message:"增加要素失败"}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0);case 10:case"end":return a.stop()}},a,t,[[0,7]])}))()},fixFn:function(e){var t=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$api.unsplash.postfixElement(e);case 3:"0"===a.sent.errno?(t.fixFormVisible=!1,t.$message({type:"success",message:"修改要素成功"}),t.getElementFn(t.selectMatterName)):t.$message({type:"warning",message:"修改要素失败"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,t,[[0,8]])}))()},deleteSingleFn:function(e){var t=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$api.unsplash.postClearElement(e);case 3:"0"===a.sent.errno?(t.$message({type:"success",message:"删除成功!"}),t.selectIds=[],t.getElementFn(t.selectMatterName)):t.myAlert("服务器错误","警告",t),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,t,[[0,8]])}))()},handleSelectionChange:function(e,t){this.selectIds=[];for(var a=0;a<e.length;a++)this.selectIds.push(e[a].id)},selectAllFn:function(e){this.selectIds=[];for(var t=0;t<e.length;t++)this.selectIds.push(e[t].id)},headerCellStyle:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(t>-1)return{"text-align":"center"}},cellStyle:function(e){e.row,e.column,e.rowIndex;if(e.columnIndex>=0)return{"text-align":"center"}},myAlert:function(e,t,a){a.$alert(e,t,{confirmButtonText:"确定",callback:function(e){}})},addSequence:function(e){for(var t=0;t<e.length;t++)e[t].index=t+1;return e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("el-row",{staticClass:"functionalArea",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addBtnFn}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-share"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.clearBtnFn}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form",[a("el-form-item",{attrs:{label:"主题","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择主题"},on:{change:e.changeThemeFn},model:{value:e.selectThemeId,callback:function(t){e.selectThemeId=t},expression:"selectThemeId"}},e._l(e.themeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form",[a("el-form-item",{attrs:{label:"事项","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择主题"},on:{change:e.changeMatterFn},model:{value:e.selectMatterId,callback:function(t){e.selectMatterId=t},expression:"selectMatterId"}},e._l(e.matterList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.searchTheme,callback:function(t){e.searchTheme=t},expression:"searchTheme"}},[a("template",{slot:"append"},[a("el-button",{attrs:{type:"success",plain:""}},[e._v("搜索")])],1)],2)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":e.headerCellStyle,"cell-style":e.cellStyle},on:{select:e.handleSelectionChange,"select-all":e.selectAllFn}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.index))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"材料清单",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"准备要求",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.require))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审查要求",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.permit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加要素",visible:e.addFormVisible,width:"800px"},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"事项","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.item,callback:function(t){e.$set(e.form,"item",t)},expression:"form.item"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入要素",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流程工序","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行使层级"},model:{value:e.form.process,callback:function(t){e.$set(e.form,"process",t)},expression:"form.process"}},e._l(e.processList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"必要","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行使层级"},model:{value:e.form.need,callback:function(t){e.$set(e.form,"need",t)},expression:"form.need"}},e._l(e.needList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"形式要点","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.require,callback:function(t){e.$set(e.form,"require",t)},expression:"form.require"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"许可要点","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form.permit,callback:function(t){e.$set(e.form,"permit",t)},expression:"form.permit"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addSureFn}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑要素",visible:e.fixFormVisible,width:"800px"},on:{"update:visible":function(t){e.fixFormVisible=t}}},[a("el-form",{attrs:{model:e.form1}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"事项","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form1.item,callback:function(t){e.$set(e.form1,"item",t)},expression:"form1.item"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入要素",autocomplete:"off"},model:{value:e.form1.name,callback:function(t){e.$set(e.form1,"name",t)},expression:"form1.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流程工序","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择工序"},model:{value:e.form1.process,callback:function(t){e.$set(e.form1,"process",t)},expression:"form1.process"}},e._l(e.processList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"必要","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行使层级"},model:{value:e.form1.need,callback:function(t){e.$set(e.form1,"need",t)},expression:"form1.need"}},e._l(e.needList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"形式要点","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form1.require,callback:function(t){e.$set(e.form1,"require",t)},expression:"form1.require"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"许可要点","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.form1.permit,callback:function(t){e.$set(e.form1,"permit",t)},expression:"form1.permit"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.fixFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.fixSureFn}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(i,o,!1,function(e){a("rY0b")},"data-v-207ff682",null);t.default=c.exports},rY0b:function(e,t){}});
//# sourceMappingURL=20.5467a4aae93d35603047.js.map